<!DOCTYPE html>
<html>
    <head>
      <title data-il8n="game_babybella">Baby Bella</title>
        <script src="/ruffle/ruffle.js"></script>
        <link rel="stylesheet" href="/styles.css">
    </head>

    <script src="/language.js"></script>

    <body class="game" onload="loadLanguagePref()">
        <script src="/header.js"></script>

        <div class="alert">
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p data-il8n="babybella_warning" >
          This game / ad seems to be missing some of the original functionality</p>
        </div> 
        
        <script>
          // Gets the correct swf file from url
          const searchQueryString = window.location.search;
          const urlParameters = new URLSearchParams(searchQueryString);
          dateOfFile = urlParameters.get('date')

          function urlExists(url)
          {
              var http = new XMLHttpRequest();
              http.open('HEAD', url, false);
              http.send();
              return http.status!=404;
          }

          let swfFile = `./flash/babmini/babmini_${dateOfFile}.swf`;

          if (!dateOfFile || !urlExists(swfFile)) {
            dateOfFile ='17Dec08'
            swfFile = `./flash/babmini/babmini_${dateOfFile}.swf`;
          }

          window.RufflePlayer = {
            config: {
              autoplay: "on",
            }
          };
        </script>

        <div class="swf" dir="ltr" rbidi="on"></div>

        <div class="footer">
          <a href="/index.html" class="global-lowernav-link" data-il8n="footer_home_linktxt">Home</a> |
          <a href="https://bellasara.wiki.gg/wiki/%22Baby_Bella%22" class="global-lowernav-link" data-il8n="footer_wiki_linktxt" data-il8n="footer_wiki_linktxt">Wiki Page</a> |
          <a href="https://web.archive.org/web/20081019193023/http://www.bellasara.com/babybella/index.aspx" data-il8n="footer_webarchive_linktxt" data-il8n="footer_webarchive_linktxt" class="global-lowernav-link">Web Archive Page</a>
        </div>

        <script src="/flags.js"></script>

        <!-- Load correct localized version of the game -->
        <script>
          loadLanguagePref(false); 
          const locale = getCurrentLanguageCode();
          var swfParent = document.getElementsByClassName('swf')[0];
          var swfPlayer = document.createElement('embed');
          swfPlayer.height = '580';
          swfPlayer.width = '884';
          swfPlayer.pluginspage = 'http://www.macromedia.com/go/getflashplayer';
          swfPlayer.src = swfFile;
          swfPlayer.type = 'application/x-shockwave-flash';
          swfPlayer.setAttribute("flashvars", `language=${locale}&showVideo=true&wsdl=http://www.bellasara.com/BellaSara/poll.asmx?WSDL&babycode=9876-ABCD&date=20111112&showFamilyReunion=true`);
          swfParent.appendChild(swfPlayer);
        </script>
  </body>
</html>
